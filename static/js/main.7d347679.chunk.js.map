{"version":3,"sources":["state/ducks/scidata/index.tsx","state/ducks/scidata/reducers.tsx","state/ducks/scidata/schema/index.tsx","state/ducks/scidata/constants/schemaList.js","state/ducks/scidata/config.js","views/components/SciDataTab.jsx","views/components/SciDataTabPanel.jsx","views/components/SciDataTabs.js","state/ducks/scidata/uischema/index.tsx","state/ducks/scidata/datasets.js","index.tsx","state/store.js"],"names":["reducer","combineReducers","jsonforms","jsonformsReducer","schemas","context","dataset","parameter","unit","value","schemaList","generateSchemaResolver","name","schema","order","canRead","file","url","indexOf","read","JSON","stringify","console","log","ajv","createAjv","useDefaults","resolvers","i","length","addSchema","jsonFormsConfiguration","refParserOptions","resolve","SciDataTab","_this$props","this","props","title","isActive","changeTab","react_default","a","createElement","Menu","Item","key","active","onClick","as","React","Component","SciDataTabPanel","display","activeItem","changeChildTab","pointing","secondary","Segment","SciDataTabs","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","childActiveItem","childDisplay","renderJsonForm","defaultDisplay","bind","assertThisInitialized","renderTabFromDataset","renderTabs","tabName","setState","_this2","SciDataTab_SciDataTab","formName","_this3","react_lib","data","uischema","path","Button","content","color","submitForm","datasets","filter","obj","undefined","dataForDataset","SciDataTabPanel_SciDataTabPanel","_this4","map","renderActiveTabPanel","tabs","Grid","Column","width","fluid","vertical","tabular","Container","header","Divider","stretched","connect","getData","uischemas","hello","createSchemaDataset","store","initialState","createStore","rootReducer","getState","dispatch","Actions","init","scidataJsonFormsConfiguration","configureStore","cells","materialCells","renderers","materialRenderers","render","es","components_SciDataTabs","document","getElementById"],"mappings":"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","file":"static/js/main.7d347679.chunk.js","sourcesContent":["import reducer from \"./reducers\";\n\nexport default reducer;","import { combineReducers} from 'redux';\nimport { jsonformsReducer } from '@jsonforms/core';\n\nconst reducer = combineReducers({ \n        jsonforms: jsonformsReducer()\n});\n\nexport default reducer;\n","import contextSchema from './context.json';\nimport datasetSchema from './dataset.json';\nimport parameterSchema from './parameter.json';\nimport unitSchema from './unit.json';\nimport valueSchema from './value.json';\n\nconst schemas = {\n    context: contextSchema,\n    dataset: datasetSchema,\n    parameter: parameterSchema,\n    unit: unitSchema,\n    value: valueSchema,\n}\n\nexport default schemas;","export default [\n    'dataset',\n    'parameter',\n    'unit', \n    'value',\n]","import { createAjv } from \"@jsonforms/core\";\nimport schemas from './schema';\nimport schemaList from './constants/schemaList';\n\nfunction generateSchemaResolver(name, schema) {\n  return {\n    order: 1,\n    canRead: function(file) {\n        return file.url.indexOf(name + '.json') !== -1;\n    },\n    read: function() {\n        return JSON.stringify(schema)\n    }\n  }\n}\n\n// Combined schema validator and schema resolver\nconsole.log('SchemaList:', schemaList)\nconst ajv = createAjv({useDefaults: true});\nvar resolvers = {'context': generateSchemaResolver('context', schemas['context'])};\nfor( var i = 0; i < schemaList.length; i++) {\n  const name = schemaList[i];\n  ajv.addSchema(schemas[name], name + '.json');\n  resolvers[name] = generateSchemaResolver(name, schemas[name]);\n}\n\n// JSONForms configuration for Redux Store\nconst jsonFormsConfiguration = {\n  ajv: ajv,\n  refParserOptions: {\n    resolve: resolvers\n  }\n};\n\nexport default jsonFormsConfiguration;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Menu } from \"semantic-ui-react\";\n\nimport \"semantic-ui-css/semantic.min.css\";\n\n// Tab Component\nexport default class SciDataTab extends React.Component {\n  static propTypes = {\n    name: PropTypes.string,\n    title: PropTypes.string,\n    isActive: PropTypes.bool,\n    changeTab: PropTypes.func\n  };\n\n  render() {\n    const { name, title, isActive, changeTab } = this.props;\n\n    return (\n      <Menu.Item key={name} active={isActive} onClick={changeTab} as=\"a\">\n        {title}\n      </Menu.Item>\n    );\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Menu, Segment } from \"semantic-ui-react\";\n\nexport default class  SciDataTabPanel extends React.Component {\n    static propTypes = {\n      display: PropTypes.node,\n      activeItem: PropTypes.string,\n      changeChildTab: PropTypes.func\n    };\n  \n    render () {\n      const {\n        display,\n        activeItem,\n        changeChildTab\n      } = this.props;\n  \n      return (\n        <div>\n          <Menu pointing secondary>\n            <Menu.Item\n              name=\"Input\"\n              active={activeItem === \"Input\"}\n              onClick={() => changeChildTab(\"Input\")}\n            />\n            <Menu.Item\n              name=\"JSON-LD\"\n              active={activeItem === \"JSON-LD\"}\n              onClick={() => changeChildTab(\"JSON-LD\")}\n            />\n          </Menu>\n  \n          <Segment>{display}</Segment>\n        </div>\n      );\n    }\n  }","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { Grid, Menu, Button, Container, Divider } from \"semantic-ui-react\";\nimport { JsonForms } from \"@jsonforms/react\";\nimport { getData } from \"@jsonforms/core\";\n\nimport SciDataTab from \"./SciDataTab\";\nimport SciDataTabPanel from \"./SciDataTabPanel\";\n\n// Tabs Component\nclass SciDataTabs extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      activeItem: \"\",\n      childActiveItem: \"Input\",\n      childDisplay: this.renderJsonForm({}, {}, \"\")\n    };\n\n    this.defaultDisplay = <h1> </h1>;\n\n    this.changeTab = this.changeTab.bind(this);\n    this.changeChildTab = this.changeChildTab.bind(this);\n    this.renderTabFromDataset = this.renderTabFromDataset.bind(this);\n    this.renderTabs = this.renderTabs.bind(this);\n  }\n\n  static propTypes = {\n    datasets: PropTypes.arrayOf(\n      PropTypes.shape({\n        name: PropTypes.string,\n        path: PropTypes.string,\n        title: PropTypes.string,\n        schema: PropTypes.shape({\n          properties: PropTypes.object,\n          title: PropTypes.string,\n          type: PropTypes.string\n        }),\n        uischema: PropTypes.shape({\n          elements: PropTypes.arrayOf(PropTypes.object),\n          label: PropTypes.string,\n          type: PropTypes.string\n        })\n      })\n    )\n  };\n\n  changeTab(tabName) {\n    this.setState({\n      activeItem: tabName\n    });\n  }\n\n  changeChildTab(tabName) {\n    this.setState({\n      childActiveItem: tabName\n    });\n  }\n\n  renderTabFromDataset(dataset) {\n    const activeItem = this.state.activeItem;\n    const isActive = activeItem === dataset.name ? true : false;\n    return (\n      <SciDataTab\n        key={dataset.name}\n        name={dataset.name}\n        title={dataset.title}\n        isActive={isActive}\n        changeTab={() => this.changeTab(dataset.name)}\n      />\n    );\n  }\n\n  submitForm(formName) {\n    console.log(\"Form \" + formName + \" submitted!\");\n  }\n\n  renderJsonForm(dataset) {\n    console.log(dataset)\n    return (\n      <div>\n        <JsonForms\n          key={dataset.name}\n          data={dataset.data}\n          schema={dataset.schema}\n          uischema={dataset.uischema}\n          path={dataset.path}\n        />\n        <Button\n          content=\"Submit\"\n          color=\"red\"\n          onClick={() => this.submitForm(dataset.name)}\n        />\n      </div>\n    );\n  }\n\n  renderActiveTabPanel() {\n    const activeItem = this.state.activeItem;\n    const datasets = this.props.datasets;\n    if (datasets.length === 0) return;\n    const activeDatasetArray = datasets.filter(obj => activeItem === obj.name);\n    const dataset = activeDatasetArray[0];\n\n    const childActiveItem = this.state.childActiveItem;\n\n    if (dataset === undefined) {\n      return this.defaultDisplay;\n    }\n\n    const dataForDataset = this.props.data[dataset.path];\n\n    var display;\n    if (childActiveItem === \"Input\") {\n      display = this.renderJsonForm(dataset);\n    } else {\n      display = JSON.stringify(dataForDataset, null, 2);\n    }\n\n    return (\n      <SciDataTabPanel\n        activeItem={childActiveItem}\n        display={display}\n        changeChildTab={this.changeChildTab}\n      />\n    );\n  }\n\n  renderTabs() {\n    const datasets = this.props.datasets;\n    const tabs = datasets.map(dataset => this.renderTabFromDataset(dataset));\n    return tabs;\n  }\n\n  render() {\n    const display = this.renderActiveTabPanel();\n    var tabs = this.renderTabs();\n\n    //const myArray = this.createTabs();\n    return (\n      <div>\n        <Grid>\n          <Grid.Column width={4}>\n            <Menu fluid vertical tabular>\n              <Container>\n                <Menu.Item header>DATA</Menu.Item>\n                <Divider />\n                {tabs}\n              </Container>\n            </Menu>\n          </Grid.Column>\n\n          <Grid.Column stretched width={12}>\n            {display}\n          </Grid.Column>\n        </Grid>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return { data: getData(state) };\n};\n\nexport default connect(mapStateToProps)(SciDataTabs);\n","import datasetUiSchema from './dataset.json';\nimport parameterUiSchema from './parameter.json';\nimport unitUiSchema from './unit.json';\nimport valueUiSchema from './value.json';\n\n\nconst uischemas = {\n    dataset: datasetUiSchema,\n    parameter: parameterUiSchema,\n    unit: unitUiSchema,\n    value: valueUiSchema,\n}\n\nexport default uischemas;","\nimport schemas from './schema';\nimport uischemas from './uischema';\nimport schemaList from './constants/schemaList';\n\nfunction createSchemaDataset(name, schema, uischema) {\n    return {\n        name: name,\n        path: name,\n        title: name,\n        schema: schema,\n        uischema: uischema,\n        data: {\"hello\": \"world\"}\n    }\n}\n\nconst datasets = schemaList.map(name => createSchemaDataset(name, schemas[name], uischemas[name]));\n\nexport default datasets;","import React from 'react';\nimport { render } from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { JsonFormsState } from '@jsonforms/core';\nimport { materialCells, materialRenderers } from '@jsonforms/material-renderers';\n\nimport configureStore from './state/store';\nimport SciDataTabs from './views/components/SciDataTabs';\n\nimport schemas from './state/ducks/scidata/schema';\nimport uischemas from './state/ducks/scidata/uischema';\nimport datasets from './state/ducks/scidata/datasets';\n\nconsole.log(schemas)\nconsole.log(uischemas)\n\nconst sciDataInitialState: JsonFormsState = {\n  jsonforms: {\n    cells: materialCells,\n    renderers: materialRenderers\n  }\n};\n\nconst store = configureStore(sciDataInitialState);\n\n\n\nconst App = () => (\n  <Provider store={store}>\n    <SciDataTabs\n      datasets={datasets}\n    />\n  </Provider>\n);\n\n\nrender(<App />, document.getElementById('root'));\n\n","import { createStore } from \"redux\";\nimport { Actions } from \"@jsonforms/core\";\n\n//import * as reducers from \"./ducks\";\nimport { default as rootReducer } from \"./ducks/scidata\";\n\nimport { default as scidataJsonFormsConfiguration } from \"./ducks/scidata/config\";\n\nexport default function configureStore(initialState) {\n  //const rootReducer = combineReducers( reducers );\n\n  const store = createStore(rootReducer, initialState);\n  console.log(store.getState());\n\n  // Combine sub-schema to single for intial store\n  const data = {};\n  const schema = {};\n  const uischema = {};\n\n  store.dispatch(\n    Actions.init(data, schema, uischema, scidataJsonFormsConfiguration)\n  );\n\n  return store;\n}\n"],"sourceRoot":""}